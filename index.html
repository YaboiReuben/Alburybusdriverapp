<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTV Staff Application</title>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0fdf4; /* Very light green background */
            color: #1f2937;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen">

    <div class="max-w-4xl w-full mx-auto bg-white p-6 md:p-10 rounded-3xl shadow-2xl border border-green-100">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-green-800 mb-2 drop-shadow-sm">Public Transport Victoria</h1>
            <h2 class="text-2xl font-bold text-green-600 mb-4 drop-shadow-sm">Staff Application</h2>
            <p class="text-lg text-gray-600">Please fill out the form below to apply for a staff position.</p>
        </header>

        <!-- Rules and Requirements -->
        <section class="mb-8 p-6 bg-yellow-50 rounded-lg border-l-4 border-yellow-400 text-yellow-800 shadow-inner">
            <h2 class="text-xl font-semibold mb-2">Important Requirements</h2>
            <ul class="list-disc list-inside space-y-2 text-yellow-900">
                <li>You must be at least 13 years of age.</li>
                <li>You must be a member of our official Discord server.</li>
                <li>You must be a member of our Roblox group <strong class="text-blue-600">Public Transport Victoria (PTV)</strong>.</li>
                <li>Any use of AI to generate responses will result in an automatic disqualification.</li>
            </ul>
        </section>

        <!-- Application Form Container -->
        <form id="applicationForm" class="space-y-6" onsubmit="handleSubmit(event)">

            <!-- Page 1 â€“ Info -->
            <div id="page1" class="page space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 1 â€“ Info</h3>
                <div class="w-full">
                    <label for="robloxUsername" class="block text-sm font-medium text-green-700">Roblox Username</label>
                    <input type="text" id="robloxUsername" name="robloxUsername" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200">
                </div>
                <div class="w-full">
                    <label for="discordUsername" class="block text-sm font-medium text-green-700">Discord Username</label>
                    <input type="text" id="discordUsername" name="discordUsername" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200">
                </div>
                <div class="flex justify-end pt-4">
                    <button type="button" onclick="nextPage()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Next</button>
                </div>
            </div>

            <!-- Page 2 â€“ Job Selection -->
            <div id="page2" class="page hidden space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 2 â€“ Job Selection</h3>
                <div class="w-full">
                    <label for="role" class="block text-sm font-medium text-green-700">Role you want</label>
                    <select id="role" name="role" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200">
                        <option value="">-- Select a role --</option>
                        <option value="Martins Albury CEO">ðŸŸ¨ Martins Albury CEO</option>
                        <option value="Martins Manager">ðŸŸ¨ Martins Manager</option>
                        <option value="Martins Driver">ðŸšŒ Martins Driver</option>
                        <option value="Dysons CEO">ðŸŸ© Dysons CEO</option>
                        <option value="Dysons Manager">ðŸŸ© Dysons Manager</option>
                        <option value="Dysons Driver">ðŸšŒ Dysons Driver</option>
                    </select>
                </div>
                <div class="flex justify-between pt-4">
                    <button type="button" onclick="previousPage()" class="px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white font-bold rounded-lg transition duration-300">Previous</button>
                    <button type="button" onclick="nextPage()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Next</button>
                </div>
            </div>

            <!-- Page 3 â€“ Experience (Dynamic) -->
            <div id="page3" class="page hidden space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 3 â€“ Experience</h3>
                <div id="experienceQuestionsContainer" class="space-y-6"></div>
                <div class="flex justify-between pt-4">
                    <button type="button" onclick="previousPage()" class="px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white font-bold rounded-lg transition duration-300">Previous</button>
                    <button type="button" onclick="nextPage()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Next</button>
                </div>
            </div>

            <!-- Page 4 â€“ Availability -->
            <div id="page4" class="page hidden space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 4 â€“ Availability</h3>
                <div class="w-full">
                    <label for="availabilityHours" class="block text-sm font-medium text-green-700">How many hours per week can you dedicate to this role?</label>
                    <input type="number" id="availabilityHours" name="availabilityHours" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200">
                </div>
                <div class="w-full">
                    <label for="availabilityDays" class="block text-sm font-medium text-green-700">What days of the week are you most active?</label>
                    <textarea id="availabilityDays" name="availabilityDays" rows="3" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200"></textarea>
                </div>
                <div class="w-full">
                    <label for="timezone" class="block text-sm font-medium text-green-700">What time zone are you in?</label>
                    <input type="text" id="timezone" name="timezone" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200"></textarea>
                </div>
                <div class="flex justify-between pt-4">
                    <button type="button" onclick="previousPage()" class="px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white font-bold rounded-lg transition duration-300">Previous</button>
                    <button type="button" onclick="nextPage()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Next</button>
                </div>
            </div>

            <!-- Page 5 â€“ General Questions -->
            <div id="page5" class="page hidden space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 5 â€“ General Questions</h3>
                <div class="w-full">
                    <label for="howFound" class="block text-sm font-medium text-green-700">How did you find out about our group?</label>
                    <textarea id="howFound" name="howFound" rows="2" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200"></textarea>
                </div>
                <div class="w-full">
                    <label for="pastExperience" class="block text-sm font-medium text-green-700">Have you ever been a staff member in a similar Roblox group? If so, which one?</label>
                    <textarea id="pastExperience" name="pastExperience" rows="3" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200"></textarea>
                </div>
                <div class="w-full">
                    <label for="passion" class="block text-sm font-medium text-green-700">Why are you passionate about public transport?</label>
                    <textarea id="passion" name="passion" rows="3" required class="mt-1 block w-full px-4 py-2 bg-green-50 border-2 border-green-200 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm transition duration-200"></textarea>
                </div>
                <div class="flex justify-between pt-4">
                    <button type="button" onclick="previousPage()" class="px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white font-bold rounded-lg transition duration-300">Previous</button>
                    <button type="button" onclick="nextPage()" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Next</button>
                </div>
            </div>

            <!-- Page 6 â€“ Review -->
            <div id="page6" class="page hidden space-y-4">
                <h3 class="text-xl font-bold text-green-700">Page 6 â€“ Review</h3>
                <p>Please review your answers before submitting.</p>
                <div id="reviewContent" data-editing="false" class="space-y-4 p-4 bg-green-50 rounded-lg"></div>
                <div class="flex justify-between pt-4">
                    <button type="button" onclick="previousPage()" class="px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white font-bold rounded-lg transition duration-300">Previous</button>
                    <div class="flex space-x-2">
                        <button type="button" id="editButton" onclick="toggleEditReview()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition duration-300">Edit</button>
                        <button type="submit" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition duration-300">Submit Final Application</button>
                    </div>
                </div>
            </div>
        </form>

        <!-- Submission Summary (Initially hidden) -->
        <div id="summaryContainer" class="hidden mt-8 p-6 bg-green-50 rounded-lg border-l-4 border-green-500 text-green-800 shadow-inner">
            <h2 id="summaryHeader" class="text-xl font-semibold mb-2"></h2>
            <p id="summaryText" class="mb-4"></p>
            <div id="summaryContent" class="space-y-2 text-sm text-green-700"></div>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 6;
        let originalFormValues = {};
        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1415590171394572369/VuKSQ2ovHfQKcKVGuSAk9lgSe1eGXcPwAJ6k1Zo9U4GLM1npy1YGnFCbY6i8B3M6Q422';

        const questions = {
            'CEO': [
                "What is your most valuable leadership quality and how would you apply it as CEO?",
                "Describe your experience managing a team or a large project.",
                "How would you respond to negative feedback from the community?",
                "What new ideas or features would you introduce to the group?",
                "How would you handle a situation where a high-ranking staff member is not meeting expectations?"
            ],
            'Manager': [
                "How do you stay organized and keep track of multiple tasks?",
                "Describe your approach to training new staff members.",
                "How would you de-escalate a tense situation between two staff members?",
                "What are your top three priorities for a successful team?",
                "How would you ensure all your staff are aware of new rules or updates?"
            ],
            'Driver': [
                "What does safe and professional driving mean to you in a Roblox game?",
                "How would you handle a passenger who is spamming the chat or being rude?",
                "Why do you think it's important to follow a bus route accurately?",
                "What makes you stand out from other applicants who want to be a driver?",
                "How would you handle a technical issue with your bus, such as a glitch or a bug?"
            ]
        };
        const formFieldMap = {
            'robloxUsername': 'Roblox Username',
            'discordUsername': 'Discord Username',
            'role': 'Applied Role',
            'availabilityHours': 'Availability Hours',
            'availabilityDays': 'Availability Days',
            'timezone': 'Time Zone',
            'howFound': 'How Found',
            'pastExperience': 'Past Experience',
            'passion': 'Passion'
        };
        
        // This function saves data from the visible form fields into the central data object.
        function saveCurrentPageData() {
            const form = document.getElementById('applicationForm');
            const formData = new FormData(form);
            for (const [key, value] of formData.entries()) {
                originalFormValues[key] = value;
            }
        }

        // This function loads data from the central data object into the form fields.
        function loadPageData(pageNumber) {
            const form = document.getElementById('applicationForm');
            const pageDiv = document.getElementById(`page${pageNumber}`);
            const fields = pageDiv.querySelectorAll('input, textarea, select');
            
            fields.forEach(field => {
                if (originalFormValues[field.name] !== undefined) {
                    field.value = originalFormValues[field.name];
                }
            });

            if (pageNumber === 3) {
                loadExperienceQuestions();
            }
        }

        function showPage(pageNumber) {
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            document.getElementById(`page${pageNumber}`).classList.remove('hidden');
        }

        function validateCurrentPage() {
            const currentForm = document.getElementById(`page${currentPage}`);
            const requiredFields = currentForm.querySelectorAll('[required]');
            for (const field of requiredFields) {
                if (!field.value) {
                    field.classList.add('border-red-500');
                    return false;
                }
                field.classList.remove('border-red-500');
            }
            return true;
        }

        function loadExperienceQuestions() {
            const selectedRole = originalFormValues['role'];
            const container = document.getElementById('experienceQuestionsContainer');
            container.innerHTML = '';

            let roleType = '';
            if (selectedRole.includes('CEO')) {
                roleType = 'CEO';
            } else if (selectedRole.includes('Manager')) {
                roleType = 'Manager';
            } else if (selectedRole.includes('Driver')) {
                roleType = 'Driver';
            }

            if (questions[roleType]) {
                questions[roleType].forEach((question, index) => {
                    const questionGroup = document.createElement('div');
                    questionGroup.classList.add('space-y-2');

                    const label = document.createElement('label');
                    label.htmlFor = `q_exp_${index}`;
                    label.textContent = question;
                    label.classList.add('block', 'text-sm', 'font-medium', 'text-green-700');

                    const textarea = document.createElement('textarea');
                    textarea.id = `q_exp_${index}`;
                    textarea.name = `experience_answer_${index}`;
                    textarea.rows = 4;
                    textarea.required = true;
                    textarea.classList.add('mt-1', 'block', 'w-full', 'px-4', 'py-2', 'bg-green-50', 'border-2', 'border-green-200', 'rounded-md', 'shadow-sm', 'focus:ring-green-500', 'focus:border-green-500', 'sm:text-sm', 'transition', 'duration-200');
                    
                    const savedValue = originalFormValues[`experience_answer_${index}`];
                    if(savedValue !== undefined) {
                        textarea.value = savedValue;
                    }

                    questionGroup.appendChild(label);
                    questionGroup.appendChild(textarea);
                    container.appendChild(questionGroup);
                });
            }
        }

        function populateReviewPage() {
            const reviewContent = document.getElementById('reviewContent');
            reviewContent.innerHTML = '';

            // Main form fields
            for (const [key, value] of Object.entries(formFieldMap)) {
                const p = document.createElement('p');
                p.innerHTML = `<span class="font-semibold">${value}:</span> ${originalFormValues[key] || 'Not provided'}`;
                reviewContent.appendChild(p);
            }

            // Experience questions
            const role = originalFormValues['role'];
            let roleType = '';
            if (role.includes('CEO')) roleType = 'CEO';
            else if (role.includes('Manager')) roleType = 'Manager';
            else if (role.includes('Driver')) roleType = 'Driver';

            const expQuestions = questions[roleType];
            if (expQuestions) {
                const h4 = document.createElement('h4');
                h4.innerHTML = `<br><span class="font-bold underline">Experience Questions for ${roleType}:</span>`;
                reviewContent.appendChild(h4);

                expQuestions.forEach((q, index) => {
                    const ans = originalFormValues[`experience_answer_${index}`] || 'Not provided';
                    const p = document.createElement('p');
                    p.innerHTML = `<span class="font-semibold">${q}</span><br>${ans}`;
                    reviewContent.appendChild(p);
                });
            }
        }

        function applyReviewEdits() {
            const editableInputs = document.querySelectorAll('#reviewContent input, #reviewContent textarea, #reviewContent select');
            editableInputs.forEach(input => {
                originalFormValues[input.name] = input.value;
            });
        }

        function toggleEditReview() {
            const reviewContent = document.getElementById('reviewContent');
            const editButton = document.getElementById('editButton');
            const isEditing = reviewContent.getAttribute('data-editing') === 'true';

            if (isEditing) {
                // Save and display
                if (!validateEditableFields()) {
                    return;
                }
                applyReviewEdits();
                populateReviewPage();
                editButton.textContent = 'Edit';
                reviewContent.setAttribute('data-editing', 'false');
            } else {
                // Edit mode
                reviewContent.innerHTML = '';
                
                const createInput = (name, type, labelText, rows = null) => {
                    const div = document.createElement('div');
                    div.classList.add('space-y-2');
                    const label = document.createElement('label');
                    label.textContent = labelText;
                    label.classList.add('block', 'text-sm', 'font-medium', 'text-green-700');
                    div.appendChild(label);
                    let input;
                    if (type === 'textarea') {
                        input = document.createElement('textarea');
                        input.rows = rows;
                    } else if (type === 'select') {
                        input = document.createElement('select');
                        const originalSelect = document.getElementById(name);
                        if (originalSelect) {
                            for(const option of originalSelect.options) {
                                const opt = document.createElement('option');
                                opt.value = option.value;
                                opt.text = option.text;
                                input.appendChild(opt);
                            }
                        }
                    } else {
                        input = document.createElement('input');
                        input.type = type;
                    }
                    input.name = name;
                    input.value = originalFormValues[name] || '';
                    input.required = true;
                    input.classList.add('mt-1', 'block', 'w-full', 'px-4', 'py-2', 'bg-green-50', 'border-2', 'border-green-200', 'rounded-md', 'shadow-sm', 'focus:ring-green-500', 'focus:border-green-500', 'sm:text-sm', 'transition', 'duration-200');
                    div.appendChild(input);
                    return div;
                };

                reviewContent.appendChild(createInput('robloxUsername', 'text', formFieldMap['robloxUsername']));
                reviewContent.appendChild(createInput('discordUsername', 'text', formFieldMap['discordUsername']));
                reviewContent.appendChild(createInput('role', 'select', formFieldMap['role']));
                reviewContent.appendChild(createInput('availabilityHours', 'number', formFieldMap['availabilityHours']));
                reviewContent.appendChild(createInput('availabilityDays', 'textarea', formFieldMap['availabilityDays'], 3));
                reviewContent.appendChild(createInput('timezone', 'text', formFieldMap['timezone']));
                reviewContent.appendChild(createInput('howFound', 'textarea', formFieldMap['howFound'], 2));
                reviewContent.appendChild(createInput('pastExperience', 'textarea', formFieldMap['pastExperience'], 3));
                reviewContent.appendChild(createInput('passion', 'textarea', formFieldMap['passion'], 3));

                // Add experience questions
                const role = originalFormValues['role'];
                let roleType = '';
                if (role.includes('CEO')) roleType = 'CEO';
                else if (role.includes('Manager')) roleType = 'Manager';
                else if (role.includes('Driver')) roleType = 'Driver';
                
                const expQuestions = questions[roleType];
                if (expQuestions) {
                    expQuestions.forEach((q, index) => {
                        const ans = originalFormValues[`experience_answer_${index}`] || '';
                        const questionGroup = document.createElement('div');
                        questionGroup.classList.add('space-y-2');

                        const label = document.createElement('label');
                        label.textContent = q;
                        label.classList.add('block', 'text-sm', 'font-medium', 'text-green-700');
                        
                        const textarea = document.createElement('textarea');
                        textarea.name = `experience_answer_${index}`;
                        textarea.rows = 4;
                        textarea.value = ans;
                        textarea.required = true;
                        textarea.classList.add('mt-1', 'block', 'w-full', 'px-4', 'py-2', 'bg-green-50', 'border-2', 'border-green-200', 'rounded-md', 'shadow-sm', 'focus:ring-green-500', 'focus:border-green-500', 'sm:text-sm', 'transition', 'duration-200');

                        questionGroup.appendChild(label);
                        questionGroup.appendChild(textarea);
                        reviewContent.appendChild(questionGroup);
                    });
                }

                editButton.textContent = 'Save';
                reviewContent.setAttribute('data-editing', 'true');
            }
        }

        function validateEditableFields() {
            const reviewContent = document.getElementById('reviewContent');
            const requiredFields = reviewContent.querySelectorAll('[required]');
            for (const field of requiredFields) {
                if (!field.value) {
                    field.classList.add('border-red-500');
                    return false;
                }
                field.classList.remove('border-red-500');
            }
            return true;
        }

        function nextPage() {
            if (validateCurrentPage()) {
                saveCurrentPageData();
                if (currentPage < totalPages) {
                    currentPage++;
                    loadPageData(currentPage);
                    if (currentPage === 6) {
                        populateReviewPage();
                    }
                    showPage(currentPage);
                }
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                saveCurrentPageData();
                currentPage--;
                loadPageData(currentPage);
                showPage(currentPage);
            }
        }
        
        async function sendToDiscord(data) {
            const embeds = [{
                title: `New Staff Application from ${data.robloxUsername}`,
                description: `A new application has been submitted by a user.`,
                color: 5763719, // A nice green color
                fields: [
                    { name: 'Roblox Username', value: data.robloxUsername, inline: true },
                    { name: 'Discord Username', value: data.discordUsername, inline: true },
                    { name: 'Applied Role', value: data.role, inline: false },
                    { name: 'Weekly Hours', value: data.availabilityHours, inline: true },
                    { name: 'Most Active Days', value: data.availabilityDays, inline: false },
                    { name: 'Time Zone', value: data.timezone, inline: true },
                    { name: 'How Found', value: data.howFound, inline: false },
                    { name: 'Past Experience', value: data.pastExperience, inline: false },
                    { name: 'Passion for Public Transport', value: data.passion, inline: false }
                ]
            }];

            const role = data.role;
            let roleType = '';
            if (role.includes('CEO')) roleType = 'CEO';
            else if (role.includes('Manager')) roleType = 'Manager';
            else if (role.includes('Driver')) roleType = 'Driver';
            
            const expQuestions = questions[roleType];
            if (expQuestions) {
                expQuestions.forEach((q, index) => {
                    const ans = data[`experience_answer_${index}`];
                    embeds[0].fields.push({
                        name: `Experience Question: ${q}`,
                        value: ans,
                        inline: false
                    });
                });
            }

            try {
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ embeds })
                });

                if (response.ok) {
                    return true;
                } else {
                    console.error('Discord webhook failed to send. Status:', response.status);
                    return false;
                }
            } catch (error) {
                console.error('Failed to send to Discord webhook:', error);
                return false;
            }
        }

        async function handleSubmit(event) {
            event.preventDefault();
            const form = document.getElementById('applicationForm');
            const summaryContainer = document.getElementById('summaryContainer');
            const summaryHeader = document.getElementById('summaryHeader');
            const summaryText = document.getElementById('summaryText');
            const summaryContent = document.getElementById('summaryContent');
            
            summaryContent.innerHTML = '';
            summaryHeader.textContent = 'Submitting your application...';
            summaryText.textContent = 'Please wait a moment while we process your submission.';

            form.classList.add('hidden');
            summaryContainer.classList.remove('hidden');
            summaryContainer.scrollIntoView({ behavior: 'smooth' });

            // Ensure the final state is saved from the review page
            applyReviewEdits();

            const success = await sendToDiscord(originalFormValues);

            if (success) {
                summaryHeader.textContent = 'Application Submitted Successfully!';
                summaryText.textContent = 'Thank you for your interest. We will review your application shortly. Here is a summary of your submission:';
                for (const [key, value] of Object.entries(originalFormValues)) {
                    const label = formFieldMap[key] || key.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    const p = document.createElement('p');
                    p.innerHTML = `<span class="font-semibold">${label}:</span> ${value}`;
                    summaryContent.appendChild(p);
                }
            } else {
                summaryHeader.textContent = 'Submission Failed';
                summaryText.textContent = 'There was an error submitting your application. Please check your internet connection and try again later.';
            }
        }

        window.onload = () => {
            showPage(currentPage);
        };
    </script>
</body>
</html>
